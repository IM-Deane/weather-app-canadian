(()=>{"use strict";async function e(e="edmonton",t="ca",n="metric"){try{const r=`https://api.openweathermap.org/data/2.5/weather?q=${e},${t}\n      &appid=3cadde1d3ac06f0b7c8aa5362b43622d&units=${n}`,i=await fetch(r,{mode:"cors"}),a=await i.json();return a.units=n,a}catch(e){console.error("Whoops something went wrong!",e)}}function t(e){return{city:e.name,country:e.sys.country,cityID:e.id,temp:parseInt(e.main.temp),feelsLike:parseInt(e.main.feels_like),description:e.weather[0].description,wind:e.wind.speed,humidity:e.main.humidity,pressure:e.main.pressure,icon:e.weather[0].main,units:e.units}}const n=(()=>{const e=new Date,t=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()).padStart(2,"0"),r=e.getFullYear(),i=["Janurary","Feburary","March","April","May","June","July","August","September","October","November","December"],a=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];return{createNewDate:function(e){const t=new Date;let n=null;n=e.includes("-")?e.split("-"):e.split("/");const r=n[0];t.setFullYear(Number(r));const i=n[1];t.setMonth(Number(i));const a=n[2];return t.setDate(Number(a)),t},defaultDate:()=>r+"/"+n+"/"+t,dateWithWeekday:function(t=e,n=e.getDate()){return function(t=e){const n=t.getDay();return a[n]}(t)+", "+function(t=e){const n=t.getMonth();return i[n]}(t)+" "+n},currentTime:function(e){const t=new Date;let n=t.getHours();const r=String(t.getMinutes()).padStart(2,"0"),i=String(t.getSeconds()).padStart(2,"0"),a=n<12?"AM":"PM";n=n>12?n-12:n,n=0==n?12:n,e.textContent=`${n}:${r}:${i} ${a}`}}})();const r=(()=>{const e=document.getElementById("main"),t=e.querySelector(".location"),r=e.querySelector(".description"),i=document.querySelector(".icon-box"),a=e.querySelector(".current-temp"),c=e.querySelector(".details"),o=e.querySelector("#time"),s=e.querySelector("#date"),u=e=>"metric"===e?{temp:"℃",distance:"m/s"}:"imperial"===e?{temp:"℉",distance:"m/h"}:void 0,d=e=>{(async function(e){try{const t=`https://api.giphy.com/v1/gifs/${function(e){let t=null;switch(e=e.toLowerCase()){case"thunder":t="Q8bCsT2A4cuVM8C93X";break;case"drizzle":case"rain":t="kBfL5cuu4bj4rr6GN8";break;case"snow":t="KAdwIAgwyWl4R6DFtA";break;case"clear":t="Xev6MDHoxXrUAQZDMa";break;case"clouds":t="TercUvhYRPkmkDUNZk";break;default:t="3NeU6yW7Oo33nDUTlg"}return t}(e)}?api_key=xj9qAvGJF696mdrfW5k9kCBr5SqT7kOj`,n=document.createElement("img"),r=await fetch(t,{mode:"cors"}),i=await r.json();return n.src=i.data.images.original.url,n}catch(e){console.error("Whoops -- something went wrong",e)}})(e).then((function(e){e.classList.add("icon"),i.innerHTML=`<img src=${e.src} class="icon" alt="Weather giph"/>`}))};return{header:(e,n,i,a)=>{((e,n)=>{t.textContent=`${e}, ${n}`})(e,n),(e=>{r.textContent=e})(i),d(a)},mainContent:(e,t,n,r,i,o)=>{((e,t="metric")=>{const n=u(t);a.textContent=e+n.temp})(e,o),((e,t,n,r,i="metric")=>{const a=u(i);c.innerHTML=`\n    <h3>Details</h3>\n    <hr>\n    <p id="feels-like">Feels like: <span>${e} ${a.temp}</span></p>\n    <p id="wind-speed">Wind: <span>${t} ${a.distance}</span></p>\n    <p id="humidity">Humidity: <span>${n}%</span></p>\n    <p id="pressure">Pressure: <span>${r} hPa</span></p>\n    `})(t,n,r,i,o)},footer:()=>{setInterval((()=>n.currentTime(o)),1e3),s.textContent=` ${n.dateWithWeekday()}`}}})(),i=document.querySelector(".search-box"),a=i.querySelector("input"),c=i.querySelector("button"),o=i.querySelector(".units-box"),s=o.querySelector("#metric"),u=o.querySelector("#imperial");function d(e){document.getElementById(e).classList.toggle("highlighted")}c.addEventListener("click",(()=>{!function(n="edmonton",i="ca",a="metric"){e(n,i,a).then((function(e){const n=t(e);r.header(n.city,n.country,n.description,n.icon),r.mainContent(n.temp,n.feelsLike,n.wind,n.humidity,n.pressure,n.units),r.footer()}))}(a.value,"ca",o.querySelector(".highlighted").id),a.value=""})),s.addEventListener("click",(e=>{d("imperial"),d(e.target.id)})),u.addEventListener("click",(e=>{d(e.target.id),d("metric")})),e().then((function(e){const n=t(e);r.header(n.city,n.country,n.description,n.icon),r.mainContent(n.temp,n.feelsLike,n.wind,n.humidity,n.pressure,n.sunrise,n.sunset,n.units),r.footer()}))})();